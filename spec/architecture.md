# é¡¹ç›®æ¶æ„æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### åŸºæœ¬ä¿¡æ¯
- **é¡¹ç›®åç§°**: OBD (Difyå·¥ä½œæµæ‰¹å¤„ç†å™¨)
- **ç‰ˆæœ¬**: v0.1.0
- **æŠ€æœ¯æ ˆ**: Python 3.11+, pandas, requests, uv
- **æ¶æ„æ¨¡å¼**: åˆ†å±‚æ¶æ„ + æ¨¡å—åŒ–è®¾è®¡
- **å¼€å‘æ¨¡å¼**: TDD (æµ‹è¯•é©±åŠ¨å¼€å‘)

### é¡¹ç›®ç›®æ ‡
å¼€å‘ä¸€ä¸ªèƒ½å¤Ÿæ‰¹é‡è°ƒç”¨Difyå·¥ä½œæµAPIçš„å·¥å…·ï¼Œé€šè¿‡Excelæ–‡ä»¶è¯»å–é—®é¢˜ï¼Œè°ƒç”¨APIè·å–ç­”æ¡ˆï¼Œå¹¶ä¸æœŸæœ›ç­”æ¡ˆè¿›è¡Œå¯¹æ¯”ï¼Œæœ€ç»ˆç”Ÿæˆå‡†ç¡®ç‡ç»Ÿè®¡æŠ¥å‘Šã€‚

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### 1. æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           OBD é¡¹ç›®æ¶æ„                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           åº”ç”¨å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     main.py                                    â”‚  â”‚
â”‚  â”‚  â€¢ é…ç½®åŠ è½½ â€¢ ç¨‹åºå…¥å£ â€¢ é”™è¯¯å¤„ç† â€¢ è¿›åº¦æ§åˆ¶                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                 â”‚
â”‚                                   â–¼                                 â”‚
â”‚                           ä¸šåŠ¡é€»è¾‘å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                WorkflowBatchProcessor                          â”‚  â”‚
â”‚  â”‚  â€¢ æ‰¹å¤„ç†æµç¨‹ â€¢ çŠ¶æ€ç®¡ç† â€¢ ç»“æœè®¡ç®— â€¢ Excelå¯¼å‡º                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â–¼               â–¼                  â–¼                    â”‚    â”‚
â”‚     æœåŠ¡å±‚          æœåŠ¡å±‚              æœåŠ¡å±‚                   â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚ DifyWorkflowâ”‚  â”‚AnswerCompâ”‚    â”‚   Excel    â”‚           â”‚    â”‚
â”‚  â”‚    Client   â”‚  â”‚  arator   â”‚    â”‚  Processor â”‚           â”‚    â”‚
â”‚  â”‚             â”‚  â”‚           â”‚    â”‚            â”‚           â”‚    â”‚
â”‚  â”‚â€¢ APIè°ƒç”¨    â”‚  â”‚â€¢ åŒ¹é…ç®—æ³• â”‚    â”‚â€¢ æ–‡ä»¶è¯»å†™  â”‚           â”‚    â”‚
â”‚  â”‚â€¢ è®¤è¯å¤„ç†   â”‚  â”‚â€¢ ç»“æœå¯¹æ¯” â”‚    â”‚â€¢ æ•°æ®è½¬æ¢  â”‚           â”‚    â”‚
â”‚  â”‚â€¢ é”™è¯¯å¤„ç†   â”‚  â”‚â€¢ ç­–ç•¥é€‰æ‹© â”‚    â”‚â€¢ æ ¼å¼æ”¯æŒ  â”‚           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚                                   â”‚                             â”‚    â”‚
â”‚                                   â–¼                             â”‚    â”‚
â”‚                           æ•°æ®å±‚                                 â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    models.py                                    â”‚  â”‚
â”‚  â”‚  â€¢ WorkflowConfig â€¢ QuestionAnswer â€¢ ç±»å‹å®šä¹‰ â€¢ åºåˆ—åŒ–æ”¯æŒ        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. åˆ†å±‚è¯´æ˜

| å±‚æ¬¡ | èŒè´£ | ç»„ä»¶ | æŠ€æœ¯ç‰¹ç‚¹ |
|------|------|------|----------|
| **åº”ç”¨å±‚** | ç¨‹åºå…¥å£ã€é…ç½®ç®¡ç†ã€é”™è¯¯å¤„ç† | `main.py` | å‘½ä»¤è¡Œæ¥å£ã€é…ç½®æ–‡ä»¶è§£æ |
| **ä¸šåŠ¡é€»è¾‘å±‚** | æ ¸å¿ƒä¸šåŠ¡æµç¨‹ã€çŠ¶æ€ç®¡ç† | `WorkflowBatchProcessor` | æ‰¹å¤„ç†ã€è¿›åº¦è·Ÿè¸ªã€ç»Ÿè®¡è®¡ç®— |
| **æœåŠ¡å±‚** | ä¸“ä¸šæœåŠ¡ç»„ä»¶ | `DifyWorkflowClient`, `AnswerComparator`, Excelå¤„ç† | å•ä¸€èŒè´£ã€å¯å¤ç”¨ã€å¯æµ‹è¯• |
| **æ•°æ®å±‚** | æ•°æ®ç»“æ„å®šä¹‰ã€ç±»å‹å®‰å…¨ | `models.py` | ç±»å‹æ³¨è§£ã€æ•°æ®éªŒè¯ |

---

## ğŸ”§ æŠ€æœ¯é€‰å‹

### 1. ç¼–ç¨‹è¯­è¨€
- **Python 3.11+**: ç°ä»£Pythonç‰¹æ€§ï¼Œç±»å‹æ³¨è§£æ”¯æŒè‰¯å¥½
- **ç†ç”±**: ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ã€ç®€å•æ˜“ç”¨ã€AIé¢†åŸŸå¹¿æ³›ä½¿ç”¨

### 2. åŒ…ç®¡ç†
- **uv**: ç°ä»£PythonåŒ…ç®¡ç†å™¨
- **ç†ç”±**: é«˜æ€§èƒ½ã€å†…ç½®è™šæ‹Ÿç¯å¢ƒã€Pipå…¼å®¹æ€§å¥½
- **ä¾èµ–ç®¡ç†**: `pyproject.toml` + `requirements.txt`

### 3. æ ¸å¿ƒä¾èµ–

| ä¾èµ– | ç‰ˆæœ¬ | ç”¨é€” | æ›¿ä»£æ–¹æ¡ˆ |
|------|------|------|----------|
| requests | >=2.31.0 | HTTPå®¢æˆ·ç«¯ | httpx, aiohttp |
| pandas | >=2.0.0 | æ•°æ®å¤„ç† | polars, dask |
| openpyxl | >=3.1.0 | Excelæ”¯æŒ | xlsxwriter, xlrd |
| pytest | >=7.0.0 | æµ‹è¯•æ¡†æ¶ | unittest, nose |
| pytest-mock | >=3.10.0 | Mockå·¥å…· | unittest.mock |

### 4. å¼€å‘å·¥å…·

| å·¥å…· | ç”¨é€” | é…ç½®æ–‡ä»¶ |
|------|------|----------|
| Black | ä»£ç æ ¼å¼åŒ– | pyproject.toml |
| Ruff | ä»£ç æ£€æŸ¥å’Œä¿®å¤ | pyproject.toml |
| MyPy | ç±»å‹æ£€æŸ¥ | mypy.ini |
| pytest-cov | æµ‹è¯•è¦†ç›–ç‡ | pytest.ini |

---

## ğŸ“ é¡¹ç›®ç»“æ„

### æ ‡å‡†srcå¸ƒå±€
```
obd/
â”œâ”€â”€ .claude/                          # Claudeé…ç½®
â”œâ”€â”€ .git/                            # Gitç‰ˆæœ¬æ§åˆ¶
â”œâ”€â”€ .spec/                           # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                     # æ–‡æ¡£å¯¼èˆª
â”‚   â”œâ”€â”€ api.md                        # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ models.md                     # æ•°æ®æ¨¡å‹æ–‡æ¡£
â”‚   â”œâ”€â”€ processor.md                  # æ‰¹å¤„ç†æ¨¡å—æ–‡æ¡£
â”‚   â”œâ”€â”€ comparator.md                 # ç­”æ¡ˆå¯¹æ¯”æ¨¡å—æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md              # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ setup.md                      # å®‰è£…é…ç½®æŒ‡å—
â”‚   â”œâ”€â”€ quickstart.md                 # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”œâ”€â”€ examples.md                   # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ testing-strategy.md          # æµ‹è¯•ç­–ç•¥
â”‚   â”œâ”€â”€ coding-standards.md           # å¼€å‘è§„èŒƒ
â”‚   â””â”€â”€ troubleshooting.md            # é—®é¢˜æ’æŸ¥
â”œâ”€â”€ src/
â”‚   â””â”€â”€ obd/                         # ä¸»åŒ…
â”‚       â”œâ”€â”€ __init__.py               # åŒ…åˆå§‹åŒ–
â”‚       â”œâ”€â”€ main.py                   # ç¨‹åºå…¥å£
â”‚       â”œâ”€â”€ models.py                 # æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ client/                   # APIå®¢æˆ·ç«¯æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ dify_client.py        # Dify APIå°è£…
â”‚       â”œâ”€â”€ comparator/              # ç­”æ¡ˆå¯¹æ¯”æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ answer_comparator.py # åŒ¹é…ç®—æ³•
â”‚       â”œâ”€â”€ processor/                # æ‰¹å¤„ç†æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ batch_processor.py    # æ‰¹å¤„ç†æ ¸å¿ƒ
â”‚       â””â”€â”€ utils/                    # å·¥å…·æ¨¡å—
â”‚           â”œâ”€â”€ __init__.py
â”‚           â””â”€â”€ helpers.py           # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ tests/                           # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py                  # pytesté…ç½®
â”‚   â”œâ”€â”€ test_models.py               # æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_client.py               # å®¢æˆ·ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ test_comparator.py            # å¯¹æ¯”å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_processor.py             # å¤„ç†å™¨æµ‹è¯•
â”‚   â””â”€â”€ test_integration.py          # é›†æˆæµ‹è¯•
â”œâ”€â”€ scripts/                         # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ install.sh                   # å®‰è£…è„šæœ¬
â”‚   â””â”€â”€ test.sh                      # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ data/                            # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ questions.xlsx                # æµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ expected_results.json        # æœŸæœ›ç»“æœ
â”œâ”€â”€ config.ini                       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ pyproject.toml                   # é¡¹ç›®é…ç½®
â”œâ”€â”€ requirements.txt                # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ pytest.ini                      # pytesté…ç½®
â”œâ”€â”€ .gitignore                       # Gitå¿½ç•¥è§„åˆ™
â”œâ”€â”€ LICENSE                          # å¼€æºåè®®
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â””â”€â”€ CLAUDE.md                        # Claudeå¼€å‘è§„èŒƒ
```

---

## ğŸ”„ æ•°æ®æµè®¾è®¡

### 1. ä¸»è¦æ•°æ®æµ

```
Excelæ–‡ä»¶
    â†“ (pandas)
DataFrame
    â†“ (è½¬æ¢)
QuestionAnswer[]
    â†“ (å¹¶è¡Œå¤„ç†)
APIè°ƒç”¨ â†’ Dify API
    â†“ (å“åº”)
æ›´æ–°workflow_result
    â†“ (å¯¹æ¯”)
AnswerComparator
    â†“ (ç»“æœ)
æ›´æ–°is_correct, match_type
    â†“ (æ”¶é›†)
Statisticsè®¡ç®—
    â†“ (å¯¼å‡º)
Excelç»“æœæ–‡ä»¶
```

### 2. é”™è¯¯å¤„ç†æµç¨‹

```
APIè°ƒç”¨å¤±è´¥
    â†“
æ•è·å¼‚å¸¸
    â†“
è®¾ç½®errorå­—æ®µ
    â†“
ç»Ÿè®¡ä¸ºfailed
    â†“
è¾“å‡ºæ—¶æ ‡è®°ä¸ºâœ—
```

### 3. è¿›åº¦è·Ÿè¸ªæµç¨‹

```
å¼€å§‹å¤„ç†
    â†“
æ˜¾ç¤ºæ€»è¡Œæ•°
    â†“ (æ¯è¡Œ)
æ˜¾ç¤ºè¿›åº¦: [i/total]
    â†“ (æˆåŠŸ/å¤±è´¥)
æ˜¾ç¤ºçŠ¶æ€: âœ“/âœ—
    â†“ (å®Œæˆ)
æ˜¾ç¤ºç»Ÿè®¡ç»“æœ
```

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. SOLIDåŸåˆ™åº”ç”¨

| åŸåˆ™ | åº”ç”¨å®ä¾‹ | è¯´æ˜ |
|------|----------|------|
| **S - å•ä¸€èŒè´£** | `DifyWorkflowClient`åªè´Ÿè´£APIè°ƒç”¨ | æ¯ä¸ªç±»åªæœ‰ä¸€ä¸ªå˜åŒ–åŸå›  |
| **O - å¼€é—­åŸåˆ™** | `AnswerComparator`æ”¯æŒå¤šç§åŒ¹é…ç®—æ³• | æ‰©å±•æ–°çš„åŒ¹é…ç®—æ³•ä¸å½±å“ç°æœ‰ä»£ç  |
| **L - é‡Œæ°æ›¿æ¢** | æ‰€æœ‰Clientæ¥å£ç»Ÿä¸€ | å¯ä»¥æ›¿æ¢ä¸ºå…¶ä»–APIå®¢æˆ·ç«¯ |
| **I - æ¥å£éš”ç¦»** | åˆ†ç¦»è¯»å–ã€å¤„ç†ã€å¯¼å‡ºæ¥å£ | å®¢æˆ·ç«¯åªä¾èµ–éœ€è¦çš„æ¥å£ |
| **D - ä¾èµ–å€’ç½®** | ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç° | å¯ä»¥è½»æ¾æ›¿æ¢å®ç° |

### 2. DRYåŸåˆ™

- **å¤ç”¨åŒ¹é…ç®—æ³•**: `AnswerComparator`è¢«å¤šä¸ªåœ°æ–¹ä½¿ç”¨
- **ç»Ÿä¸€é”™è¯¯å¤„ç†**: ä½¿ç”¨ç›¸åŒçš„å¼‚å¸¸å¤„ç†æ¨¡å¼
- **é€šç”¨å·¥å…·å‡½æ•°**: å°†é‡å¤é€»è¾‘æŠ½è±¡ä¸ºå·¥å…·æ–¹æ³•

### 3. KISSåŸåˆ™

- **ç®€å•é…ç½®**: ä½¿ç”¨INIæ–‡ä»¶ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
- **ç›´è§‚æ¥å£**: æ–¹æ³•å‘½åæ¸…æ™°ï¼Œå‚æ•°ç®€å•
- **çº¿æ€§æµç¨‹**: æ‰¹å¤„ç†æµç¨‹æ¸…æ™°æ˜“æ‡‚

### 4. YAGNIåŸåˆ™

- **åªå®ç°å¿…è¦åŠŸèƒ½**: æ²¡æœ‰è¿‡åº¦è®¾è®¡
- **å»¶è¿Ÿä¼˜åŒ–**: æ€§èƒ½ä¼˜åŒ–åªåœ¨éœ€è¦æ—¶è¿›è¡Œ
- **é¿å…æœªæ¥é¢„ç•™**: åªå®ç°å½“å‰æ˜ç¡®éœ€æ±‚

---

## ğŸš€ æ€§èƒ½è€ƒè™‘

### 1. å†…å­˜ä¼˜åŒ–

```python
# æµå¼å¤„ç†å¤§æ–‡ä»¶
def process_large_excel(file_path: str, batch_size: 1000):
    # åˆ†å—è¯»å–ï¼Œé¿å…å†…å­˜æº¢å‡º
    for chunk in pd.read_excel(file_path, chunksize=batch_size):
        process_batch(chunk)
```

### 2. ç½‘ç»œä¼˜åŒ–

```python
# è¿æ¥å¤ç”¨
session = requests.Session()
session.headers.update({
    'Authorization': f'Bearer {api_key}',
    'Content-Type': 'application/json'
})

# è¯·æ±‚é™æµ
from ratelimit import limits, sleep_and_retry

@sleep_and_retry
@limits(calls=10, period=1)
def api_call():
    # APIè°ƒç”¨
```

### 3. å¹¶å‘å¤„ç†

```python
# ç®€å•çš„å¼‚æ­¥æ”¯æŒ
import asyncio
import aiohttp

async def async_process_questions(questions):
    async with aiohttp.ClientSession() as session:
        tasks = [process_question(session, q) for q in questions]
        return await asyncio.gather(*tasks)
```

---

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†ç­–ç•¥

### 1. åˆ†å±‚é”™è¯¯å¤„ç†

| å±‚æ¬¡ | é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ |
|------|----------|----------|
| **åº”ç”¨å±‚** | é…ç½®é”™è¯¯ã€å‚æ•°é”™è¯¯ | æ˜¾ç¤ºå‹å¥½é”™è¯¯ä¿¡æ¯ |
| **ä¸šåŠ¡å±‚** | ä¸šåŠ¡é€»è¾‘é”™è¯¯ | è®°å½•æ—¥å¿—ï¼Œç»§ç»­å¤„ç† |
| **æœåŠ¡å±‚** | APIé”™è¯¯ã€ç½‘ç»œé”™è¯¯ | é‡è¯•æœºåˆ¶ï¼Œé™çº§å¤„ç† |
| **æ•°æ®å±‚** | æ•°æ®æ ¼å¼é”™è¯¯ | æ•°æ®éªŒè¯ï¼Œå¼‚å¸¸æŠ›å‡º |

### 2. é”™è¯¯åˆ†ç±»

```python
# è‡ªå®šä¹‰å¼‚å¸¸ç±»
class OBDError(Exception):
    """OBDåŸºç¡€å¼‚å¸¸"""
    pass

class APIError(OBDError):
    """APIè°ƒç”¨å¼‚å¸¸"""
    pass

class ConfigError(OBDError):
    """é…ç½®é”™è¯¯"""
    pass

class ProcessingError(OBDError):
    """å¤„ç†é”™è¯¯"""
    pass
```

### 3. é‡è¯•æœºåˆ¶

```python
from tenacity import retry, stop_after_attempt, wait_exponential

@retry(
    stop=stop_after_attempt(3),
    wait=wait_exponential(multiplier=1, min=4, max=10)
)
def api_call_with_retry():
    # APIè°ƒç”¨
    pass
```

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### 1. æ—¥å¿—é…ç½®

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('obd.log'),
        logging.StreamHandler()
    ]
)
```

### 2. å…³é”®æŒ‡æ ‡

- **å¤„ç†é€Ÿåº¦**: è¡Œ/åˆ†é’Ÿ
- **æˆåŠŸç‡**: (total - failed) / total
- **å¹³å‡å»¶è¿Ÿ**: APIå“åº”æ—¶é—´
- **å†…å­˜ä½¿ç”¨**: å³°å€¼å†…å­˜å ç”¨
- **é”™è¯¯ç‡**: failed / total

### 3. å¥åº·æ£€æŸ¥

```python
def health_check() -> Dict[str, Any]:
    """ç³»ç»Ÿå¥åº·æ£€æŸ¥"""
    return {
        "status": "healthy",
        "version": "0.1.0",
        "dependencies": {
            "pandas": pandas.__version__,
            "requests": requests.__version__
        }
    }
```

---

## ğŸ“ ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

### 1. è¯­ä¹‰åŒ–ç‰ˆæœ¬

```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
MAJOR.MINOR.PATCH
```

- **ä¸»ç‰ˆæœ¬å·**: ä¸å…¼å®¹çš„APIä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**: å‘åæ–°å¢åŠŸèƒ½
- **ä¿®è®¢å·**: å‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤

### 2. åˆ†æ”¯ç­–ç•¥

```
main (ä¸»åˆ†æ”¯)
â”œâ”€â”€ develop (å¼€å‘åˆ†æ”¯)
â”œâ”€â”€ feature/* (åŠŸèƒ½åˆ†æ”¯)
â”œâ”€â”€ hotfix/* (çƒ­ä¿®å¤åˆ†æ”¯)
â””â”€â”€ release/* (å‘å¸ƒåˆ†æ”¯)
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### 1. å¼€å‘ç¯å¢ƒæ­å»º
```bash
# å…‹éš†é¡¹ç›®
git clone <repo-url>
cd obd

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# å®‰è£…ä¾èµ–
uv pip install -r requirements.txt

# è¿è¡Œæµ‹è¯•
uv run pytest
```

### 2. å¸¸è§é—®é¢˜
- [é—®é¢˜æ’æŸ¥æŒ‡å—](troubleshooting.md)
- [APIæ¥å£æ–‡æ¡£](api.md)
- [å¼€å‘è§„èŒƒ](coding-standards.md)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| v0.1.0 | 2025-12-29 | åˆå§‹ç‰ˆæœ¬ï¼Œå®ŒæˆåŸºç¡€æ¶æ„è®¾è®¡ |
| v0.1.1 | 2025-12-29 | ä¿®æ­£APIè°ƒç”¨ç«¯ç‚¹ï¼Œå®Œå–„é”™è¯¯å¤„ç† |

---

## ğŸ”— ç›¸å…³èµ„æº

- [Pythonå®˜æ–¹æ–‡æ¡£](https://docs.python.org/)
- [Difyå®˜æ–¹æ–‡æ¡£](https://docs.dify.ai/)
- [Pandasæ–‡æ¡£](https://pandas.pydata.org/)
- [Requestsæ–‡æ¡£](https://requests.readthedocs.io/)